<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">

    <link th:href="@{/css/index.css}" rel="stylesheet">
    <link th:href="@{/css/botones.css}" rel="stylesheet">
    <link th:href="@{/css/header.css}" rel="stylesheet">
    <link th:href="@{/css/incidentes.css}" rel="stylesheet">

    <link th:href="@{/img/icono.ico}" rel="icon" type="image/x-icon">
    <title>Incidentes</title>
</head>
<body class="bg-light min-vh-100" th:classappend="${bodyClass}">
<header class="header text-white py-3">
    <div class="container d-flex justify-content-between align-items-center">
        <a th:href="@{/index}">
            <img src="/img/Logo.png" class="logo" alt="Logo">
        </a>
        <div class="dropdown">
            <button class="user-button" onclick="toggleDropdown()">
                <img th:src="@{/img/perfil.png}" alt="Foto de perfil"> ${usuario}
            </button>
            <div id="dropdown-content" class="dropdown-content">
                <a th:href="@{/incidentes}">Ver incidentes</a>
                <a th:href="@{/logout}">Cerrar SesiÃ³n</a>
            </div>
        </div>
    </div>
</header>
<main>
    <div class="containerIncidentes">
        <th:block th:if="${lista_incidentes}">
            <th:each var="incidente" th:each="incidente:${lista_incidentes}">
                <div class="incidente">
                    <img th:src="'/img/' + ${incidente.servicio.imagen}" alt="Incidente en escaleras">
                    <div class="incidente-detalles">
                        <h2 th:text="'Incidente en ' + ${incidente.establecimiento.nombre} + '(' + ${incidente.establecimiento.entidad.nombre} + ')'"></h2>
                        <p th:text="${incidente.descripcion}"></p>
                    </div>
                </div>
            </th:each>
        </th:block>
        <th:block th:unless="${lista_incidentes}">
            <div class="vacio">
                <img src="/img/correcto.png" width="300px" height="300px">
                <a>No hay incidentes registrados</a>
            </div>
        </th:block>
    </div>
</main>
<footer class="mt-auto">
</footer>
<script th:src="@{/javascript/botones.js}"></script>
<script th:src="@{/javascript/ventanasEmergentes.js}"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
</body>
</html>

